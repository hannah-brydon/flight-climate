jsTagManagerJsonpCallback([4],{234:function(t,e,n){"use strict";e.a={getWindow:function(){return"undefined"!==typeof window?window:{}},getDocument:function(){return"undefined"!==typeof document?document:{}},getNavigator:function(){return"undefined"!==typeof navigator?navigator:{}}}},236:function(t,e,n){"use strict";var r=n(234);e.a=function(){var t=r.a.getWindow(),e=r.a.getDocument(),n=e.documentElement,i=e.getElementsByTagName("body")[0];return{width:t.innerWidth||n.clientWidth||i.clientWidth,height:t.innerHeight||n.clientHeight||i.clientHeight}}},237:function(t,e,n){"use strict";var r=(n(243),n(244),n(245),n(234));n(246),n(238),n(239),n(247),n(248),n(236),n(249),n(250),n(251),n(252),n(253),n(254);n.d(e,"a",function(){return r.a})},238:function(t,e,n){"use strict";var r=n(234);e.a=function(){return r.a.getNavigator().userAgent}},239:function(t,e,n){"use strict";var r=n(234),i=n(236),a=n(238),o=function(t,e){return 414===t.height&&90===Math.abs(e.orientation)},u=function(t,e){return 414===t.width&&0===e.orientation},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(a.a)(),e=Object(i.a)(),n=r.a.getWindow();return/iPhone.*Safari/i.test(t)&&!/(CriOS|OPiOS|Chrome|Edge|Firefox|FxiOS)/i.test(t)&&(o(e,n)||u(e,n))};e.a=c},240:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(237),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.DEFAULT_COOKIE_NAME="storageFallback",this.COOKIE_EXPIRY_VALUE=7776e6,this.sessionOnly=e,this.$document=i.a.getDocument()}return a(t,[{key:"getRawCookie",value:function(t){var e=this.$document.cookie.split(";"),n=e.filter(function(e){return 0===e.trim().indexOf(t)});if(!n.length)return{};var r=n[0].split("=");return 2!==r.length?null:JSON.parse(r[1])}},{key:"setRawCookie",value:function(t,e,n,r){var i=t+"="+e;if(!n){var a=r;a||(a=new Date,a.setTime(a.getTime()+this.COOKIE_EXPIRY_VALUE)),i+="; expires="+a.toUTCString()}return this.$document.cookie=i,this.$document.cookie}},{key:"getItem",value:function(t){var e=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return e?JSON.stringify(e[t]):null}},{key:"setItem",value:function(t,e){var n=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return n?(n[t]=JSON.parse(e),this.setRawCookie(this.DEFAULT_COOKIE_NAME,JSON.stringify(n),this.sessionOnly)):null}},{key:"createOrUpdateCookie",value:function(t,e,n){return this.setRawCookie(t,e,!1,n)}}]),t}();e.a=o},241:function(t,e,n){"use strict";var r=n(242);n(240);n.d(e,"a",function(){return r.a})},242:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(237),a=n(240),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){try{var t=i.a.getWindow(),e=t.localStorage,n=t.sessionStorage;e.setItem("__initTest__","__initValue"),n.setItem("__initTest__","__initValue")}catch(t){return!1}return!0},c=function(){function t(e){r(this,t),this.namespace=e,this.browserStorage=null}return o(t,[{key:"getBrowserStorage",value:function(t,e){var n=u(),r=i.a.getWindow();return this.browserStorage=n?e?r.sessionStorage:r.localStorage:t?new a.a(e):null,this.browserStorage}},{key:"tryGetValue",value:function(t,e,n){var r=this.getBrowserStorage(e,n);if(!r)return null;var i=r.getItem(this.namespace);if(!i)return null;if(i=JSON.parse(i),null==t)return i;for(var a=t.split("."),o=i,u=0;u<a.length;u+=1){if("undefined"===typeof(o=o[a[u]]))return null;if(u+1===a.length)return o}return null}},{key:"trySetValue",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.getBrowserStorage(n,r);if(!a)return null;var o=void 0;try{o=a.getItem(this.namespace),o=o?JSON.parse(o):{}}catch(t){return!1}for(var u=t.split("."),c=o,s=0;s<u.length;s+=1){var l=u[s];if(!(l in c)){if(i)return!1;c[l]={}}if(s+1===u.length){i?delete c[l]:c[l]=e;try{return a.setItem(this.namespace,JSON.stringify(o)),!0}catch(t){return!1}}c=c[l]}return!1}},{key:"tryDeleteValue",value:function(t,e,n){return this.trySetValue(t,null,e,n,!0)}}]),t}();e.a=c},243:function(t,e,n){"use strict";n(234)},244:function(t,e,n){"use strict";n(234)},245:function(t,e,n){"use strict";n(234)},246:function(t,e,n){"use strict";n(234)},247:function(t,e,n){"use strict";n(239),n(234),n(236)},248:function(t,e,n){"use strict"},249:function(t,e,n){"use strict";var r=n(234),i=!1,a=function(t){var e=r.a.getWindow();i?e.setTimeout(function(){return t()},0):e.addEventListener?e.addEventListener("load",t,!1):e.attachEvent&&e.attachEvent("onload",t)};a(function(){i=!0})},250:function(t,e,n){"use strict";n(234)},251:function(t,e,n){"use strict";var r=n(8);n.n(r),n(234)},252:function(t,e,n){"use strict"},253:function(t,e,n){"use strict";n(234)},254:function(t,e,n){"use strict";n(7),n(234)},51:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"FacebookRetargeting",function(){return c});var i=n(44),a=n(241),o=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(){function t(){r(this,t),this.pixelId="561358470665569"}return u(t,[{key:"createRedirectDataForFlightsSkippy",value:function(t){return{event_name:"Flights_Re-direct",eventdata:{event_name:"Flights_Re-direct",arriving_into:t.destinationCityName,num_of_adults:parseInt(t.adultsV2,10),num_of_children:parseInt((t.childrenV2||[]).length,10),currency:t.currency,outbound_date:null!=t.outboundDate?t.outboundDate.split("-").join(""):void 0,return_date:null!=t.inboundDate?t.inboundDate.split("-").join(""):void 0,departing_from_code:t.originAirport,departing_from:t.originCityName,arriving_into_code:t.destinationAirport,class_of_travel:t.cabinClass}}}},{key:"createRedirectDataForCarHireSkippy",value:function(t){return{event_name:"CarHire_Re-direct",eventdata:{event_name:"CarHire_Re-direct",currency:t.currency}}}},{key:"createPurchaseDataForFlightsSkippy",value:function(t){return{event_name:"Purchase",eventdata:{content_ids:[t.market+"_"+t.originIata+"_"+t.destinationIata],content_type:["product","flight"],currency:t.currency,value:t.redirectValue?t.redirectValue:1,origin:t.originCityName,destination:t.destinationCityName,origin_airport:t.originIata,destination_airport:t.destinationIata,departing_departure_date:null!=t.outboundDate?t.outboundDate.replace(/-/g,""):void 0,returning_departure_date:null!=t.inboundDate?t.inboundDate.replace(/-/g,""):void 0}}}},{key:"createViewContentDataForFlightsSkippy",value:function(t){return{event_name:"ViewContent",eventdata:{content_ids:[t.market+"_"+t.originIata+"_"+t.destinationIata],content_type:"product"}}}},{key:"createRedirectDataToSend",value:function(t){var e=t.category;return"transport"===e?this.createRedirectDataForFlightsSkippy(t):"carhire"===e?this.createRedirectDataForCarHireSkippy(t):{}}},{key:"createViewContentDataToSend",value:function(t){return"transport"===t.category?this.createViewContentDataForFlightsSkippy(t):{}}},{key:"createPurchaseDataToSend",value:function(t){return"transport"===t.category?this.createPurchaseDataForFlightsSkippy(t):{}}},{key:"getOrderId",value:function(t){if(t&&"redir"===t.page&&t.redirectId)return t.redirectId;try{var e=new a.a("auth-storage").tryGetValue("travellerContext.utid");return e||null}catch(t){}return null}},{key:"sendData",value:function(t,e,n){var r=i.a.getWindow();return r.fbq?"Purchase"===t.event_name?(t.eventdata=t.eventdata||{},t.eventdata.order_id=n,r.fbq("track",t.event_name,t.eventdata)):r.fbq("trackCustom",t.event_name,t.eventdata):(e.push(["track",t.event_name,t.eventdata]),e)}},{key:"bootstrap",value:function(t,e,n){var r=this.getOrderId(t);return"redir"===t.page&&(this.sendData(this.createRedirectDataToSend(t),e,r),this.sendData(this.createPurchaseDataToSend(t),e,r)),"day-view"===t.page&&this.sendData(this.createViewContentDataToSend(t),e,r),e}},{key:"extractAppRedirParameters",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").slice(1).split("&").filter(function(t){return!!t}).map(function(t){return t.split("=")}).filter(function(t){var e=o(t,1),n=e[0];return"client_version"===n||"advertising_id"===n}).reduce(function(t,e){var n=o(e,2),r=n[0],i=n[1];return t[r]=i,t},{})}},{key:"buildAppEvent",value:function(t,e,n,r){var i=t.eventdata||{},a=r||t.event_name;return i._eventName=a,delete i.event_name,"Purchase"===a&&(i.fb_order_id=e,i._valueToSum=i.value,delete i.value),i.content_ids&&(i.content_ids=JSON.stringify(i.content_ids)),i._appVersion=n,i.fb_currency=i.currency,delete i.currency,i}}]),t}(),s=function(){var t;return(t=new c).bootstrap.apply(t,arguments)},l=function(t,e){var n=i.a.getWindow(),r=i.a.getDocument();n.fbq?s(t,n._fbq,r.location.search):function(n,r,i,a,o,u,c){if(n.fbq)return!0;o=n.fbq=function(){if(o.callMethod){var t;return(t=o).callMethod.apply(t,arguments)}return o.queue.push(arguments)},n._fbq||(n._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],e("//connect.facebook.net/en_US/fbevents.js",function(){return s(t,n._fbq,r.location.search)})}(n,r)};e.default=l}});
//# sourceMappingURL=facebookretargeting-facebookretargeting.9a498562.chunk.js.map